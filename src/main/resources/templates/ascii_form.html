<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ASCII 작품 작성</title>
</head>
<style>
    body {
           margin: 0;
           padding: 0;
           font-family: Arial, sans-serif;
           background: #f5f5f5;
       }
   .container {
       max-width: 900px;
       margin: 0 auto 40px;
       padding: 20px;
       box-sizing: border-box;
   }
   }
</style>
<body>
<div th:replace="~{navbar :: navbar}"></div>
<a th:href="@{/ascii/list}">← 목록으로</a>

<h1>ASCII 작품 작성</h1>

<form th:action th:object="${asciiform}" method="post">

    <div>
        <label for="subject">제목</label>
        <input type="text" id="subject" th:field="*{subject}">
        <div th:if="${#fields.hasErrors('subject')}"
             th:errors="*{subject}"></div>
    </div>

    <div>
        <label for="content">내용</label><br/>
        <textarea id="content" th:field="*{content}" rows="20" cols="80"></textarea>
        <div th:if="${#fields.hasErrors('content')}"
             th:errors="*{content}"></div>
    </div>

    <div>
        <label>
            <input type="checkbox" th:field="*{public}">
            공개하기
        </label>
    </div>

    <button type="submit">저장</button>
</form>
<script>
    window.addEventListener("load", () => {
      const draft = sessionStorage.getItem("asciiDraft");
      if (!draft) return;

      const contentEl = document.getElementById("content");
      if (!contentEl) return;

      // 이미 사용자가 뭔가 입력했으면 덮어쓰지 않기
      if (!contentEl.value || contentEl.value.trim().length === 0) {
        contentEl.value = draft;
      }

      // 원하면: 자동으로 지우기(한 번만 붙여넣게)
      sessionStorage.removeItem("asciiDraft");
    });
</script>
</body>
</html>