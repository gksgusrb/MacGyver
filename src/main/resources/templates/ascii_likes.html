<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ì¢‹ì•„ìš”í•œ ì‘í’ˆ | MacGyver</title>

    <style>
        body {
          margin: 0;
          padding: 0;
          font-family: Arial, sans-serif;
          background: #f5f5f5;
        }

        .container {
          max-width: 900px;
          margin: 20px auto 40px;
          padding: 0 16px;
        }

        h1 { margin-bottom: 6px; }

        .sub-text {
          color: #666;
          font-size: 14px;
          margin-bottom: 18px;
        }

        .top-actions {
          display: flex;
          justify-content: space-between;
          align-items: center;
          gap: 10px;
          flex-wrap: wrap;
          margin-bottom: 14px;
        }

        .btn-primary,
        .btn-secondary {
          display: inline-block;
          padding: 8px 14px;
          border-radius: 6px;
          text-decoration: none;
          border: none;
          cursor: pointer;
          font-size: 14px;
        }

        .btn-primary { background: #007bff; color: white; }
        .btn-primary:hover { background: #0069d9; }

        .btn-secondary { background: #6c757d; color: white; }
        .btn-secondary:hover { background: #5a6268; }

        .card {
          background: #fff;
          border-radius: 10px;
          padding: 14px 14px;
          box-shadow: 0 2px 6px rgba(0,0,0,0.08);
          margin-bottom: 14px;
        }

        .card-title {
          font-size: 15px;
          font-weight: bold;
          margin-bottom: 8px;
        }

        .search-bar {
          display: flex;
          gap: 10px;
          align-items: center;
          flex-wrap: wrap;
          margin: 10px 0 10px;
        }

        .search-bar input[type="text"] {
          padding: 8px 10px;
          border: 1px solid #ccc;
          border-radius: 6px;
          min-width: 240px;
        }

        .ascii-list {
          display: flex;
          flex-direction: column;
          gap: 12px;
          margin-top: 10px;
        }

        .ascii-item {
          background: #ffffff;
          border-radius: 10px;
          padding: 12px 12px;
          box-shadow: 0 2px 6px rgba(0,0,0,0.08);
        }

        .ascii-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-bottom: 8px;
          gap: 10px;
        }

        .ascii-title a {
          font-weight: bold;
          font-size: 16px;
          color: #333;
          text-decoration: none;
        }
        .ascii-title a:hover { text-decoration: underline; }

        .ascii-meta {
          font-size: 12px;
          color: #666;
          white-space: nowrap;
        }

        .ascii-meta a {
          color: #007bff;
          text-decoration: none;
        }
        .ascii-meta a:hover { text-decoration: underline; }

        .ascii-preview {
          margin-top: 8px;
          background: #111;
          color: #0f0;
          border-radius: 8px;
          padding: 10px;
          font-family: "Consolas", "Courier New", monospace;
          font-size: 11px;
          line-height: 1.1;
          white-space: pre;
          max-height: 220px;
          overflow: auto;
        }

        .empty-message {
          margin-top: 16px;
          color: #777;
        }

        .paging {
          margin-top: 22px;
          display: flex;
          gap: 8px;
          justify-content: center;
          flex-wrap: wrap;
        }

        .page-btn {
          display: inline-block;
          padding: 8px 12px;
          border-radius: 6px;
          background: #6c757d;
          color: white;
          text-decoration: none;
          font-size: 13px;
        }
        .page-btn:hover { background: #5a6268; }
        .page-btn.active {
          font-weight: bold;
          border: 2px solid #333;
          background: #495057;
        }
    </style>
</head>
<body>

<div th:replace="~{navbar :: navbar}"></div>

<div class="container">
    <h1>ì¢‹ì•„ìš”í•œ ASCII ì‘í’ˆ</h1>
    <div class="sub-text">
        ë‚´ê°€ í•˜íŠ¸ë¥¼ ëˆ„ë¥¸ ì‘í’ˆì„ ëª¨ì•„ë´¤ì–´ìš”.
    </div>

    <div class="top-actions">
        <div style="display:flex; gap:10px; flex-wrap:wrap;">
            <a th:href="@{/ascii/list}" class="btn-secondary">ğŸŒ ì „ì²´ ê°¤ëŸ¬ë¦¬</a>
            <a th:href="@{/ascii/my}" class="btn-secondary">ğŸ™‹ ë‚´ ì‘í’ˆ</a>
        </div>
        <div style="display:flex; gap:10px; flex-wrap:wrap;">
            <a th:href="@{/ascii/create}" class="btn-primary">âœ ë‚´ ì‘í’ˆ ì˜¬ë¦¬ê¸°</a>
            <a th:href="@{/ascii/art}" class="btn-secondary">ğŸ–¼ ì´ë¯¸ì§€ â†’ ASCII ë³€í™˜ê¸°</a>
        </div>
    </div>

    <div class="card">
        <div class="card-title">ğŸ” ì¢‹ì•„ìš”í•œ ì‘í’ˆ ê²€ìƒ‰</div>

        <form class="search-bar" th:action="@{/ascii/likes}" method="get">
            <input type="text" name="kw" placeholder="ê²€ìƒ‰ (ì œëª©/ë‚´ìš©/ì‘ì„±ì)" th:value="${kw}"/>

            <input type="hidden" name="sort" th:value="${sort}">
            <input type="hidden" name="dir" th:value="${dir}">

            <button type="submit" class="btn-secondary">ê²€ìƒ‰</button>

            <a class="btn-secondary" th:href="@{/ascii/likes(page=0, kw=${kw}, sort='createDate', dir='desc')}">ìµœì‹ ìˆœ</a>
            <a class="btn-secondary" th:href="@{/ascii/likes(page=0, kw=${kw}, sort='createDate', dir='asc')}">ì˜¤ë˜ëœìˆœ</a>
            <a class="btn-secondary" th:href="@{/ascii/likes(page=0, kw=${kw}, sort='subject', dir='asc')}">ì œëª© Aâ†’Z</a>
            <a class="btn-secondary" th:href="@{/ascii/likes(page=0, kw=${kw}, sort='subject', dir='desc')}">ì œëª© Zâ†’A</a>
        </form>
    </div>

    <div th:if="${paging.totalElements == 0}" class="empty-message">
        ì•„ì§ ì¢‹ì•„ìš”í•œ ì‘í’ˆì´ ì—†ìŠµë‹ˆë‹¤. ë§ˆìŒì— ë“œëŠ” ì‘í’ˆì— í•˜íŠ¸ë¥¼ ëˆŒëŸ¬ë³´ì„¸ìš”!
    </div>

    <div th:if="${paging.totalElements > 0}" class="ascii-list">
        <div class="ascii-item" th:each="art : ${paging.content}">
            <div class="ascii-header">
                <div class="ascii-title">
                    <a th:href="@{|/ascii/detail/${art.id}|}" th:text="${art.subject}">ì œëª©</a>
                </div>
                <div class="ascii-meta">
                    by
                    <a th:href="@{|/ascii/user/${art.owner.id}|}"
                       th:text="${art.owner.username}">ì‘ì„±ì</a>
                </div>
            </div>

            <pre class="ascii-preview" th:text="${art.content}">ë¯¸ë¦¬ë³´ê¸°</pre>
        </div>
    </div>

    <div class="paging" th:if="${paging.totalPages > 1}">
        <a class="page-btn"
           th:if="${paging.hasPrevious()}"
           th:href="@{/ascii/likes(page=${paging.number-1}, kw=${kw}, sort=${sort}, dir=${dir})}">
            ì´ì „
        </a>

        <a class="page-btn"
           th:each="p : ${#numbers.sequence(0, paging.totalPages-1)}"
           th:href="@{/ascii/likes(page=${p}, kw=${kw}, sort=${sort}, dir=${dir})}"
           th:text="${p+1}"
           th:classappend="${p == paging.number} ? ' active' : ''">
        </a>

        <a class="page-btn"
           th:if="${paging.hasNext()}"
           th:href="@{/ascii/likes(page=${paging.number+1}, kw=${kw}, sort=${sort}, dir=${dir})}">
            ë‹¤ìŒ
        </a>
    </div>
</div>

</body>
</html>